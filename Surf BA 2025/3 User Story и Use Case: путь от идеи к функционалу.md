Источник: https://vk.com/video-42908247\_456239483     

# 3. User Story и Use Case: путь от идеи к функционалу   
## 3.1. Use Case   
Use Case (сценарий использования) — это метод описания взаимодействия пользователя (или другого актора) с системой для достижения определенной конкретной цели. Use Case описывает, какие действия выполняет пользователь и как система должна на них реагировать.   
Выполняют важную роль:    
- Переводят разрозненные требования в последовательность действий и реакций системы, понятные всем участникам проекта   
- Формирует общее видение продукта: как система должна функционировать и какие задачи решать, очерчивают границы системы   
- Дает команде единое понимание функциональных требований: что должна делать система (без деталей реализации)   
- По Use case-ам можно легко отследить соответствие системы потребностям: каждый Use Case привязан к определённой бизнес-цели или потребности пользователя, чтобы можно было проверить, что функциональность действительно решает бизнес-задачу   
- Служит основой для технической детализации: описывают требования в динамике, показывает взаимодействие акторов шаг за шагом   
- Ускоряет подготовку сценариев тестирования   
   
Качественный Use Case помогает команде понять что делать дальше и не приводит к ошибкам в продукте.   

### 3.1.1. Процесс создания Use Case   
1. Анализ бизнес-требований и определение границ: что хочет получить бизнес, какие функции и процессы должны быть реализованы   
2. Выделение акторов (пользователей и внешних систем): определить кто будет взаимодействовать с системой   
3. Определение предпосылок/предусловий и условий начала: что уже должно быть выполнено или в каком состоянии находится система до запуска сценария   
4. Определение конечного состояния/пост-условия и результатов: что именно является окончанием сценария и какой система становится в конце   
5. Проработка негативных (исключительных) сценариев   
6. Разработка основного успешного сценария: последовательность шагов, в результате выполнения которых актор достигает цели. Основной сценарий описывает типичный сценарий без ошибок и исключений. Все шаги нумеруем, описываем чётко и последовательно. На каждом шагу: действие актора и реакция системы   
7. Разработка альтернативных сценариев: анализ каждого шага основного сценария с вопросом "Что, если…"   
8. Приоритезация и отбор Use Case: сначала сценарии, которые реализуют бизнес-требования и ценности пользователей, а потом дополнительные    
   
### 3.1.2. Шаблон Use Case   
Формат Use Case — таблица.   
1. Заголовок. Название варианта использования   
2. Участники. Основное действующее лицо и все дополнительные участники   
3. Предусловие. В каком состоянии должен находиться каждый участник Use Case, чтобы ситуация произошла   
4. Триггер. Что провоцирует выполнение этого сценария   
5. Результат или гарантии успеха. Что будет результатом успешного выполнения сценария   
6. Описание (основной сценарий). Что должно произойти, чтобы пользователь пришёл от триггера к результату   
7. Расширения (альтернативный сценарий). Строится из основного сценария. К каждому пункту основного сценария нужно задать вопрос «А что если?». Если альтернативный сценарий использования возможен, описать его по шагам как основной.   
   
### 3.1.3. Пример Use Case   
Пример — оплата заказа на кассе самообслуживания (далее КСО):    
- Участники   
    - Покупатель (основной актор)   
    - Платёжная система (внешняя система)   
    - POS-система (внутренняя система магазина)   
- Предусловие   
    - Все товары отсканированы и добавлены в корзину   
    - Касса функционирует (в онлайн-состоянии)   
    - Устройство ввода оплаты работает   
    - Подключена система идентификации (при продаже алкоголя, сигарет)   
- Постусловие   
    - Заказ успешно оплачен   
    - Фискальный чек распечатан или отправлен в электронном виде   
    - Заказ зарегистрирован в системе   
   
Основной сценарий (действие покупателя/сотрудника и действие системы):   
1. Нажимает кнопку "Перейти к оплате"   
    1. B DB в таблице order обновляется информация о заказе, статус заказа order.status=2 (например статус ожидает оплаты)   
    2. Система показывает итоговую сумму order.total\_sum и список способов оплаты из таблицы рayment\_method   
2. Покупатель выбирает способ оплаты (карта, наличные, NFC и т.д.)   
    1. Активирует соответствующий платёжный интерфейс
    2. В таблице order обновляем параметр order.payment\_status=pending   
3. Прикладывает карту к платежному аппарату   
    1. Инициирует транзакцию с платёжной системой   
4. Подтверждает оплату (если требуется ввод PIN или подтверждение на телефоне)   
    1. Получает результат транзакции   
    2. В таблице order обновляем параметр order.payment\_status=success, order.status=5 (например оплата прошла, печать фискального чека, завершение заказа)   
5. Транзакция подтверждена   
    1. Отображает сообщение об успешной оплате, печатает чек   
    2. В таблице order обновляем параметрorder.payment status=success, order.status=6 (например завершено)   
6. Забирает чек и товары   
    1. Завершает сеанс, активирует открытие барьера / даёт сигнал "покупка завершена"   
   
Альтернативный сценарий (в корзине есть алкоголь):   
1. Нажимает кнопку "Перейти к оплате"   
    1. B DB в таблице order обновляется информация о заказе, статус заказа order.status=2.POS-система обнаруживает товар с ограничением по возрасту (product.age\_restricted=true)   
    2. На экране кассы появляется сообщение: "Для продолжения необходимо подтвердить возраст. Ожидайте сотрудника." Касса блокируется от дальнейших действий, отправляется вызов сотруднику (например, через сигнал на планшет, звуковой сигнал)   
2. Сотрудник подходит, проверяет документы покупателя (паспорт). Сотрудник подтверждает возраст (например, вводит PIN или сканирует свой бейдж)   
    1. Сотрудник открывает окно авторизации в системе. С помощью сканера (или PIN) авторизуется (см. Сценарий №2 «Авторизация в POS-системе сотрудником»)
    2. Система проверяет параметр pos\_settings.age. Если pos\_settings.age=1, то система отображает окно ввода даты рождения. Если pos\_settings.age=2, то система отображает окно с кнопками «Да/Нет» .
    3. Касса разблокируется и позволяет продолжить оплату   
3. Покупатель выбирает способ оплаты и оплачивает заказ (шаг 3 основного сценария)   
    1. Переход к основному сценарию   
   
## 3.2. User Story   
User Story - это описание какой-либо функциональности продукта с точки зрения пользователя. US ставит во главу угла пользователя, а не систему.   
Стоит избегать упоминание элементов интерфейса в US   
Как <роль>, я хочу <действие>, чтобы <цель/ценность>   

### 3.2.1. Критерии INVEST   
Критерии INVEST помогают писать хорошие US.   
1. I — Independent — Независимая от других Stories   
2. N — Negotiable — Обсуждаемая, т.е. учтено мнение команды   
3. V — Valuable — Даёт ценность пользователю или бизнесу   
4. E — Estimate — Можно оценить и понять, сколько времени, ресурсов и денег займёт разработка   
5. S — Small — Краткая и ёмкая   
6. T — Testable — Поддающаяся тестированию   
   
Плохой пример: Как пользователь, я хочу, чтобы приложение меньше зависало.   
Хороший пример: Как пользователь приложения, я хочу, чтобы экран "Корзина" открывался без задержек, чтобы я мог быстро оформить заказ.   

## 3.3. Acceptance Criteria   
Acceptance Criteria (критерии приема) — набор условий, которым должна соответствовать система, чтобы Story считалась завершенной.
   
Критерии приема:   
- определяют границы функционала   
- формируют основу для тестов   
- позволяют отследить негативные сценарии   
   
AC нужны для:   
- уточнения требований   
- снижения недопонимания   
- чёткого описания историй   
- стать основой для приёмочных тестов   
   
Формат acceptance criteria:   
- Сценарные (BDD / Gherkin): Given – When – Then   
- Правила / Условия (rule-based): Список требований к поведению системы   
- Комбинированные: Правила + сценарии   
   
Best practices:   
- Ясность и измеримость. Позитивная формулировка (без "не"), активный залог, не больше 3-4 критериев на историю   
- Избегать абстракций   
- Краткость   
- Позитивная формулировка (без "не"), активный залог   
   
## 3.4. Definition of Done   
DoD — это чеклист, определяющий, когда задача считается полностью завершенной. Набор обязательных условий, при выполнении которых история считается готовой. Минимальный уровень качества.   
Использование:   
- контроля качества и прозрачности в команде
   
- определяют границы функционала   
- формируют основу для тестов   
- позволяют отследить негативные сценарии   
   
DoD ≠ Acceptance Criteria   
|                          |                                 Acceptance Criteria |                                                  Deﬁnition of Done |
|:-------------------------|:----------------------------------------------------|:-------------------------------------------------------------------|
|             Применимость |                           Для конкретной User Story |                                              Ко всем задачам/Story |
|                    Смысл |                         Что должно быть реализовано |                                Что должно быть завершено полностью |
|                    Фокус |                                 На функциональность |                                              На качество и процесс |
|                   Формат |                          Перечень условий/сценариев |                                           Чеклист общих требований |

## 3.5. User Story Mapping   
User Story Mapping — это способ визуального планирования и приоритизации задач. Способ визуализации пользовательских историй и их наложение на путь пользователя с целью улучшения продукта и приоритизации накопившихся задач.   
Главная задача при проектировании USM — показать команде ситуацию с продуктом и приоритет задач.   
1. Подготовка к созданию карты: Определены цели, пользовательские персоны и ключевой сценарий
   
2. Брейншторм: Собраны шаги пользователя и возможные истории (user stories)
   
3. Заполнение пробелов: Добавлены недостающие шаги и сценарии, картина пути пользователя полная
   
4. Определение очерёдности: Истории упорядочены по логике пользовательского пути
   
5. Приоритизация: Определены наиболее важные истории и MVP (минимально жизнеспособный продукт)
   
6. Синхронизация с таск-трекером: Истории перенесены в трекер (Jira, Trello и т.п.) для реализации и отслеживания   
![image](files/image.png)    
   
## 3.5. Полезные материалы   
- Habr — askid: [Руководство по Use Cases](https://habr.com/ru/articles/887224/)   
- Medium — Murat Koylu: [Best Practices for Writing Acceptance Criteria in a User Story](https://medium.com/@muratkoylu85/best-practices-for-writing-acceptance-criteria-in-a-user-story-8840585cc19b)   
- Intellisof: [User Story Acceptance Criteria Explained with Examples](https://intellisoft.io/user-story-acceptance-criteria-explained-with-examples/)   
   
   
